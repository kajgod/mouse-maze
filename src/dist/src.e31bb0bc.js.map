{"version":3,"sources":["simple-reactive-state/config.js","simple-reactive-state/deep-freeze.js","simple-reactive-state/index.js","config.js","index.js"],"names":["name","version","objectDepth","deepFreeze","object","count","helpers","basicChecks","isFreezableType","config","warning","Object","freeze","getOwnPropertyNames","map","prop","console","warn","isFrozen","state","variables","sideeffects","_constants","setConst","val","defineProperty","value","enumerable","configurable","writable","getConst","setVar","getVar","horizontal","vertical","startGameListener","document","getElementById","addEventListener","classList","add","setTimeout","toggle","addTiles","y","x","tile","createElement","setAttribute","container","appendChild","createTheGrid","Array","fill","key","length","_","loadGame"],"mappings":";;AIAA;;AACA;;eDDe,AHAA;AGCXA,AHAFA,ACDF,ACAA,ECCIA,AHAFA,IGAM,AHAF,EGAI,AHAF,YGDO,WHAA;AGEXC,ACCJ,AJDEA,EGAEA,AHAFA,OGAS,AHAF,EGAI,AHAF,KGFI,AHAA;AGGXgC,AHAF/B,EGAE+B,AHAF/B,UGAY,CHAD,CGAG,CHAD,CGHA,IHGK;AGChBgC,ACAJ,AJJe,EGIXA,QAAQ,EAAE;AAJC,ADCf,IAAMf,KAAK,GAAG;AAAEC,EAAAA,SAAS,EAAE,EAAb;ADCd,ACD+BC,EAAAA,EDCzBlB,SCDoC,CDC1B,CCD4B,EDCzB,SAAbA,UAAa,CAACC,MAAD,EAASJ,IAAT,EAA6B;AAAA,ACDlC,CAAd,KDCkCK,KAAc,uEAAN,CAAM;;AAAA,ACAhD,IAAMiB,UAAU,GDC2BhB,ACDxB,EAAnB,EACA,GDAkD,CAACF,MAAD,CADF;AAAA,MACtCG,WADsC,YACtCA,WADsC;AAAA,ACEhD,IAAMgB,EDDiBf,MCCT,GAAG,MDF+B,GCE1Ce,QAAW,CDDMf,ACCLR,IAAD,EAAOwB,GAAP,EAAe,IDFgB;AGWhD,AFREb,EAAAA,MAAM,CAACc,cAAP,CAAsBH,UAAtB,EAAkCtB,IAAlC,EAAwC;AEU1C,AHXE,ACEE0B,CESH,GFTGA,EDFE,GCEG,EAAE,EESJ,CHXMtB,MAAP,MAAkB,QAAlB,ECEgBoB,EDFc,CCEzB,EAAgBxB,IDFgBI,ACEhC,CAD+B,KDDN,KAAkB,UAApD,EAAgE,OAAOA,MAAP;AGYhE,AHXA,ACEEuB,IAAAA,EDFEtB,KAAK,GAAGI,ACEA,EAAE,KAF0B,SDArBP,WAAnB,EAAgCQ,OAAO,CAACV,IAAD,CAAP;AGYhC,AHXAW,ACEEiB,EDFFjB,ECEEiB,EESIO,EHXA,CAACvB,MAAP,CAAcR,ACEA,EAAE,IDFhB,CGWuB,AFZiB,GEYd,SAApB+B,iBAAoB,GAAM;AAC9BC,AHXFzB,ACEEkB,EDFFlB,EGWEyB,AFTAP,IDFI,CAAChB,GGWG,AFTA,CESCwB,CFTC,aESV,CAAwB,AHX1B,CAA2BjC,MGWzB,AHXF,EGWmCkC,AHXAxB,GAAnC,CAAuC,UAAAC,EGWrC,C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","file":"src.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export default {\n  name: \"Simple reactive state\",\n  version: \"0.1\",\n  objectDepth: 1 << 16\n};\n","import config from \"./config\";\n\nconst deepFreeze = (object, name, count = 0) => {\n  const { basicChecks, isFreezableType } = helpers(object);\n  if (typeof object !== \"object\" && typeof object !== \"function\") return object;\n  if (count > config.objectDepth) warning(name);\n  Object.freeze(object);\n  Object.getOwnPropertyNames(object).map(prop => {\n    if (basicChecks(prop) && isFreezableType(prop)) {\n      deepFreeze(object[prop], name, ++count);\n    }\n  });\n  return object;\n};\n\nfunction warning(name) {\n  console.warn(\n    `You may have a cyclic reference in your object \"${name}\". ${config.name} v.${config.version} only allowes objects with properties up to ${config.objectDepth} levels of depth to be used as constants.`\n  );\n}\n\nfunction helpers(object) {\n  const basicChecks = prop => !!object[prop] && !Object.isFrozen(object[prop]);\n  const isFreezableType = prop =>\n    typeof object[prop] === \"object\" || typeof object[prop] === \"function\";\n  return { basicChecks, isFreezableType };\n}\n\nexport default deepFreeze;\n","import deepFreeze from \"./deep-freeze\";\nconst state = { variables: {}, sideeffects: {} };\nconst _constants = {};\n//#region constants\nconst setConst = (name, val) => {\n  Object.defineProperty(_constants, name, {\n    value: deepFreeze(val, name),\n    enumerable: false,\n    configurable: false,\n    writable: false\n  });\n};\nconst getConst = name => _constants[name];\nstate.setConst = setConst;\nstate.getConst = getConst;\n//#endregion\n//#region variables\nconst setVar = (name, val) => {\n  state.variables[name] = val;\n};\nconst getVar = name => state.variables[name];\n//#endregion\n//#region sideeffects\n//#endregion\nexport { state as default, setConst, getConst, setVar, getVar };\n","export default {\n    name: \"Mouse maze\",\n    version: \"0.1\",\n    horizontal: 10,\n    vertical: 10\n  };\n  ","import state from \"./simple-reactive-state\";\nimport config from \"./config\";\n\n//#region documentation\n/*\n\n1. const map has states:\n0 - nothing\n1 - wall\n2 - cheese\n3 - mouse\n\n*/\n//#endregion\n\n(() => {\n  //#region load stuff & prepare game to start\n  const startGameListener = () => {\n    document.getElementById(\"start\").addEventListener(\"click\", () => {\n      document.getElementById(\"main\").classList.add(\"started\");\n      setTimeout(()=>{\n        document.getElementById(\"run\").classList.toggle(\"hidden\");\n        document.getElementById(\"grid\").classList.toggle(\"hidden\");\n      }, 1000);\n    });\n  };\n  const addTiles = map => {\n    map.map((val, y) => {\n      val.map((val, x) => {\n        let tile = document.createElement(\"div\");\n        tile.setAttribute(\"id\", `c-${x}-${y}`);\n        if(val === 1)tile.classList.add(\"wall\");\n        const container = document.getElementById(\"grid\");\n        container.appendChild(tile);\n      });\n    });\n  };\n  const createTheGrid = () => {\n    //#region TODO: make it configurable for each game\n    let map = new Array(config.vertical).fill(new Array(config.horizontal));\n    //set edges\n    map = map.map((val, key) =>\n      key === 0 || key == map.length - 1\n        ? val.fill(1)\n        : val.map((_, key) => (key === 0 || key == val.length - 1 ? 1 : 0))\n    );\n    addTiles(map);\n    //#endregion\n  };\n  const loadGame = () => {\n    startGameListener();\n    createTheGrid();\n  };\n  //#endregion\n\n  loadGame();\n})();\n"]}